{% extends "base.html" %}
{% load static %}

{% block title %}My Events - Tick Entertainment{% endblock %}

{% block extra_css %}
<style>
.container { max-width:1100px }
.events-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap:20px }
.event-card { background:white; border-radius:10px; overflow:hidden; box-shadow:0 6px 18px rgba(0,0,0,0.06); }
.event-thumb { height:180px; background:#eee; }
.event-body { padding:16px }
.meta { color:#6c757d; font-size:0.95rem }
.actions { display:flex; gap:8px; margin-top:12px }
</style>
{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1>My Events</h1>
        <a href="{% url 'events:create_event' %}" class="btn btn-primary"><i class="bi bi-plus-lg"></i> Create Event</a>
    </div>

    {% if events %}
    <div class="events-grid">
        {% for event in events %}
        <div class="event-card">
            <div class="event-thumb">
                {% if event.image %}
                    <img src="{{ event.image.url }}" alt="{{ event.title }}" style="width:100%; height:100%; object-fit:cover">
                {% endif %}
            </div>
            <div class="event-body">
                <h4>{{ event.title }}</h4>
                <div class="meta">{{ event.start_date|date:"M d, Y H:i" }} Â· {{ event.venue_name }}</div>
                <div class="meta">Status: {{ event.get_status_display }}</div>
                <div class="actions">
                    <a href="{% url 'events:event_detail' event.slug %}" class="btn btn-sm btn-outline-primary">View</a>
                    <a href="{% url 'events:edit_event' event.pk %}" class="btn btn-sm btn-outline-secondary">Edit</a>
                    <form action="{% url 'events:delete_event' event.pk %}" method="POST" style="display:inline">{% csrf_token %}
                        <button class="btn btn-sm btn-outline-danger" type="submit">Delete</button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="text-center p-5">
        <h3>No events yet</h3>
        <p>Create your first event to start selling tickets.</p>
        <a href="{% url 'events:create_event' %}" class="btn btn-primary">Create Event</a>
    </div>
    {% endif %}
</div>
{% endblock %}