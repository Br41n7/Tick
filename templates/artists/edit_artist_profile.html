{% extends 'base.html' %}
{% load static %}

{% block title %}Edit Artist Profile â€” Tick Entertainment{% endblock %}

{% block extra_css %}
<style>
  .form-card { max-width: 900px; margin: 2rem auto; padding: 24px; background: #fff; border-radius: 10px; box-shadow: 0 6px 18px rgba(0,0,0,0.06); }
  .avatar-preview { width: 100px; height:100px; border-radius:50%; overflow:hidden; display:inline-block; vertical-align:middle; }
  .avatar-preview img{ width:100%; height:100%; object-fit:cover }
</style>
{% endblock %}

{% block content %}
<div class="container">
  <div class="form-card">
    <h2 class="mb-3">{{ title|default:'Artist Profile' }}</h2>

    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}

      {% if form.non_field_errors %}
        <div class="alert alert-danger">{{ form.non_field_errors }}</div>
      {% endif %}

      <div class="row mb-3">
        <div class="col-md-8">
          <label class="form-label">Stage Name</label>
          {{ form.stage_name }}
          {% if form.stage_name.errors %}<div class="text-danger">{{ form.stage_name.errors.0 }}</div>{% endif %}
        </div>
        <div class="col-md-4 text-end">
          {% if artist_profile and artist_profile.profile_image %}
            <div class="avatar-preview">
              <img src="{{ artist_profile.profile_image.url }}" alt="avatar">
            </div>
          {% endif %}
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label">Short Bio</label>
        {{ form.bio }}
        {% if form.bio.errors %}<div class="text-danger">{{ form.bio.errors.0 }}</div>{% endif %}
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <label class="form-label">Genre</label>
          {{ form.genre }}
          {% if form.genre.errors %}<div class="text-danger">{{ form.genre.errors.0 }}</div>{% endif %}
        </div>
        <div class="col-md-6">
          <label class="form-label">Booking Email</label>
          {{ form.booking_email }}
          {% if form.booking_email.errors %}<div class="text-danger">{{ form.booking_email.errors.0 }}</div>{% endif %}
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <label class="form-label">Phone Number</label>
          {{ form.phone_number }}
          {% if form.phone_number.errors %}<div class="text-danger">{{ form.phone_number.errors.0 }}</div>{% endif %}
        </div>
        <div class="col-md-6">
          <label class="form-label">Profile Image</label>
          {{ form.profile_image }}
          {% if form.profile_image.errors %}<div class="text-danger">{{ form.profile_image.errors.0 }}</div>{% endif %}
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <label class="form-label">Cover Image</label>
          {{ form.cover_image }}
          {% if form.cover_image.errors %}<div class="text-danger">{{ form.cover_image.errors.0 }}</div>{% endif %}
        </div>
        <div class="col-md-6">
          <label class="form-label">Social Links</label>
          <div class="mb-2">Instagram: {{ form.instagram_handle }}</div>
          <div class="mb-2">Twitter: {{ form.twitter_handle }}</div>
          <div class="mb-2">TikTok: {{ form.tiktok_handle }}</div>
        </div>
      </div>

      <div class="d-flex gap-2 justify-content-center mt-4">
        <button type="submit" class="btn btn-primary">Save Profile</button>
        <a href="{% url 'artists:artist_dashboard' %}" class="btn btn-outline-secondary">Cancel</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
